# Performance Optimization: ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´

## ğŸ¯ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:

- âš ï¸ N+1 queries Ğ½Ğ° ÑĞ¿Ğ¸ÑĞºĞ°Ñ… (products, orders, cart)
- âš ï¸ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ FK Ğ¸ filters
- âš ï¸ ĞĞµ Ğ²ÑĞµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- âš ï¸ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ÑÑ‚ÑÑ Ğ²ÑĞµ Ğ¿Ğ¾Ğ»Ñ (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ Ğ½ĞµĞ½ÑƒĞ¶Ğ½Ñ‹Ğµ)
- âš ï¸ ĞĞµÑ‚ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² Ğ½Ğ° pagination

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ğ´Ğ»Ñ Middle:**

- ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ API = Ğ¿Ğ»Ğ¾Ñ…Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
- N+1 = Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ñ…
- Middle Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ”

**Ğ¦ĞµĞ»ÑŒ:** Production-level performance

---

## ğŸ” ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼

### 1. N+1 Queries (ĞºĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° ORM)

**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ N+1:**

```
GET /products â†’ 1 query Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²
              â†’ N queries Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
              â†’ N queries Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ±Ñ€ĞµĞ½Ğ´Ğ°
              â†’ N queries Ğ´Ğ»Ñ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²

Ğ˜Ğ¢ĞĞ“Ğ: 1 + 3N queries Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 1!
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**

```sql
-- N+1 (Ğ¿Ğ»Ğ¾Ñ…Ğ¾)
SELECT * FROM products;          -- 1 query, 100 products
SELECT * FROM categories WHERE id = 1;  -- query 1
SELECT * FROM categories WHERE id = 2;  -- query 2
... -- 100 queries!

-- Optimized (Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾)
SELECT p.*, c.name as category_name
FROM products p
LEFT JOIN categories c ON p.category_id = c.id;  -- 1 query!
```

**Ğ“Ğ´Ğµ Ñƒ Ğ½Ğ°Ñ N+1:**

- Products list (category, brand, ratings)
- Orders list (user, order_items â†’ products)
- Users admin list (roles, addresses)
- Cart (cart_products â†’ products)

### 2. Missing Indexes

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Slow queries Ğ¸Ğ·-Ğ·Ğ° table scans

**Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²:**

**Single-column indexes:**

- FK columns: `category_id`, `user_id`, `order_id`
- Filter fields: `status`, `active`, `featured`
- Sort fields: `price`, `created_at`

**Composite indexes:**

- `(category_id, status)` - Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ + ÑÑ‚Ğ°Ñ‚ÑƒÑ
- `(user_id, status)` - Ğ¼Ğ¾Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ
- `(tenant_id, user_id)` - Ğ´Ğ»Ñ multi-tenancy (Ğ½Ğ° Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ)

**Unique indexes:**

- `email` (ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ)
- `phone` (ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ)

### 3. Pagination Issues

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ğ±ĞµĞ· Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸

**Ğ Ğ¸ÑĞºĞ¸:**

- Memory overflow (10,000+ products Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ)
- Slow response time
- Bad UX

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**

- Default limit: 5
- Max limit: 100 (enforce Ñ‡ĞµÑ€ĞµĞ· pipe)
- Meta Ñ navigation info

### 4. Over-fetching

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ²ÑĞµ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸

```typescript
// ĞŸĞ»Ğ¾Ñ…Ğ¾
SELECT * FROM users;
// â†’ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ password, createdAt, updatedAt, etc.

// Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾
SELECT id, email, first_name, last_name FROM users;
// â†’ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
```

**Sequelize:**

```typescript
// ĞŸĞ»Ğ¾Ñ…Ğ¾
User.findAll();

// Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾
User.findAll({
    attributes: {
        exclude: ['password', 'createdAt', 'updatedAt'],
    },
});
```

---

## ğŸ“‹ Ğ Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (High-Level)

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° 1: PROD-030 - Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ N+1 Queries

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** N+1 queries Ğ½Ğ° Ğ²ÑĞµÑ… ÑĞ¿Ğ¸ÑĞºĞ°Ñ… (15+ queries Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 1)

**ĞŸĞ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**

1. Audit Products list Ğ´Ğ»Ñ N+1
2. Audit Orders list Ğ´Ğ»Ñ N+1
3. Audit Users admin list Ğ´Ğ»Ñ N+1
4. Audit Cart Ğ´Ğ»Ñ N+1
5. Add attributes filtering across repositories

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** 1 query Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº, 10x faster

**ĞÑ†ĞµĞ½ĞºĞ°:** 6-8 Ñ‡Ğ°ÑĞ¾Ğ²

---

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° 2: PROD-031 - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Database Indexes

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Slow queries Ğ¸Ğ·-Ğ·Ğ° table scans, Ğ½ĞµÑ‚ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²

**ĞŸĞ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**

1. Audit ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ FK indexes
3. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ filter fields
4. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ composite indexes
5. Verify Ñ EXPLAIN ANALYZE

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** Ğ’ÑĞµ FK Ğ¸ filters Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹

**ĞÑ†ĞµĞ½ĞºĞ°:** 4-6 Ñ‡Ğ°ÑĞ¾Ğ²

---

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° 3: PROD-032 - Pagination Ğ¸ Limits

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞĞµ Ğ²ÑĞµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹, Ğ½ĞµÑ‚ max limit

**ĞŸĞ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**

1. Audit Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° Ğ²ÑĞµÑ… ÑĞ¿Ğ¸ÑĞºĞ°Ñ…
2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ³Ğ´Ğµ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚
3. Enforce max limit (100)
4. Verify pagination Meta correctness

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** Ğ’ÑĞµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ñ proper pagination

**ĞÑ†ĞµĞ½ĞºĞ°:** 3-4 Ñ‡Ğ°ÑĞ°

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### Database Query Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controller Layer                  â”‚
â”‚   - Pagination params (page, limit) â”‚
â”‚   - Filter params                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service Layer                     â”‚
â”‚   - Build query options             â”‚
â”‚   - Include related entities        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Repository Layer                  â”‚
â”‚   - findAll Ñ include               â”‚
â”‚   - attributes filtering            â”‚
â”‚   - pagination                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ORM Layer (Sequelize)             â”‚
â”‚   - Generate optimized SQL          â”‚
â”‚   - Use indexes                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database (PostgreSQL)             â”‚
â”‚   - Execute with indexes            â”‚
â”‚   - Return minimal data             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### 1. Sequelize Include (Eager Loading)

**Ğ¡Ğ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ:**

```typescript
Product.findAll({
    include: [
        {
            model: Category,
            attributes: ['id', 'name'], // Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾Ğµ
        },
        {
            model: Brand,
            attributes: ['id', 'name'],
        },
        {
            model: Rating,
            attributes: ['rating'],
            separate: false, // Ğ² Ñ‚Ğ¾Ğ¼ Ğ¶Ğµ query!
        },
    ],
    attributes: {
        exclude: ['createdAt', 'updatedAt'], // Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ
    },
});
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** 1 query Ğ²Ğ¼ĞµÑÑ‚Ğ¾ N+1

### 2. PostgreSQL Indexes

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ:**

```typescript
// Migration
await queryInterface.addIndex('products', ['category_id'], {
    name: 'idx_products_category_id',
});

// Composite
await queryInterface.addIndex('products', ['category_id', 'status'], {
    name: 'idx_products_category_status',
});
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

```sql
EXPLAIN ANALYZE
SELECT * FROM products WHERE category_id = 1 AND status = 'active';
```

Ğ˜Ñ‰ĞµĞ¼ `Index Scan` (Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾) vs `Seq Scan` (Ğ¿Ğ»Ğ¾Ñ…Ğ¾)

### 3. Pagination Helper

**MaxLimitPipe:**

```typescript
@Injectable()
export class MaxLimitPipe implements PipeTransform {
    transform(value: number) {
        return Math.min(value, 100); // max 100
    }
}
```

**Usage:**

```typescript
@Query('limit', new DefaultValuePipe(5), ParseIntPipe, new MaxLimitPipe())
limit: number
```

---

## ğŸ“ˆ Performance Metrics

### Ğ§Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµÑ€ÑĞµĞ¼:

**Response Time:**

- GET /products: target <100ms
- GET /orders: target <50ms
- GET /cart: target <30ms

**Database:**

- Query count per request: target â‰¤3
- Query time: target <20ms
- Index usage: target 100%

**API:**

- Throughput: target 100 rps
- Pagination: Ğ²ÑĞµĞ³Ğ´Ğ° enabled
- Data transfer: minimal (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ)

### Ğ˜Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾/Ğ¿Ğ¾ÑĞ»Ğµ:

```bash
# Before optimization
GET /products â†’ 15 queries, 500ms

# After optimization
GET /products â†’ 1 query, 50ms

IMPROVEMENT: 10x faster! ğŸ“ˆ
```

---

## ğŸ“ Middle vs Junior Performance

### Junior:

- "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚? ĞĞ¾Ñ€Ğ¼."
- N+1 queries (Ğ½Ğµ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°ÑÑ‚)
- ĞĞµÑ‚ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
- SELECT \* Ğ²ĞµĞ·Ğ´Ğµ

### Middle (Ñ‚Ğ²Ğ¾Ğ¹):

- **Profiling:** Ğ·Ğ½Ğ°ĞµÑ‚ Ğ³Ğ´Ğµ bottlenecks
- **N+1 prevention:** eager loading
- **Index strategy:** Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹
- **Query optimization:** Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
- **Pagination:** Ğ²ÑĞµĞ³Ğ´Ğ° Ñ limits
- **Metrics:** Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ improvement

**Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»Ğ¸ Ñ†ĞµĞ½ÑÑ‚ ÑÑ‚Ğ¾!**

---

## ğŸ›¡ï¸ Best Practices

### DO:

- âœ… Use include Ğ´Ğ»Ñ relationships
- âœ… Add indexes Ğ´Ğ»Ñ FK Ğ¸ filters
- âœ… Paginate Ğ²ÑĞµ ÑĞ¿Ğ¸ÑĞºĞ¸
- âœ… Select Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ attributes
- âœ… Use EXPLAIN ANALYZE Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
- âœ… Measure before/after
- âœ… Document optimization decisions

### DON'T:

- âŒ SELECT \* (over-fetching)
- âŒ N+1 queries (lazy loading everywhere)
- âŒ Indexes Ğ½Ğ° Ğ²ÑĞµ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ (overhead Ğ´Ğ»Ñ writes)
- âŒ ĞĞµÑ‚ pagination (memory issues)
- âŒ Premature optimization (measure first!)

---

## ğŸ“Š Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Database:

- [ ] Ğ’ÑĞµ FK Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [ ] Filter fields Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [ ] Composite indexes Ğ´Ğ»Ñ hot queries
- [ ] EXPLAIN ANALYZE Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ğ°ĞµÑ‚ usage
- [ ] ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ indexes

### Queries:

- [ ] N+1 Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ²ĞµĞ·Ğ´Ğµ
- [ ] Include Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾
- [ ] Attributes filtering Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ñ‘Ğ½
- [ ] ĞĞµÑ‚ SELECT \*
- [ ] Sequelize generates Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ SQL

### API:

- [ ] Ğ’ÑĞµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [ ] Default limit = 5
- [ ] Max limit = 100
- [ ] Meta ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹
- [ ] Response time <100ms Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²

### Verification:

- [ ] Ğ—Ğ°Ğ¼ĞµÑ€ĞµĞ½Ñ‹ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ¾/Ğ¿Ğ¾ÑĞ»Ğµ
- [ ] Improvement Ğ·Ğ°Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
- [ ] Tests Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ğ°ÑÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹
- [ ] No performance regression

---

## ğŸ¯ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Middle Ğ¿Ğ¾Ñ€Ñ‚Ñ„Ğ¾Ğ»Ğ¸Ğ¾

**Ğ§Ñ‚Ğ¾ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸ÑˆÑŒ Ğ½Ğ° ÑĞ¾Ğ±ĞµÑĞ°Ñ…:**

"Ğ’ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ» N+1 queries Ğ½Ğ° ÑĞ¿Ğ¸ÑĞºĞ°Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ².

ĞŸÑ€Ğ¾Ğ²Ñ‘Ğ» Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:

- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» eager loading Ñ‡ĞµÑ€ĞµĞ· Sequelize include
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ» Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… FK Ğ¸ Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ğ» pagination Ñ reasonable limits

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: response time ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ğ»ÑÑ Ğ² 10x (Ñ 500ms Ğ´Ğ¾ 50ms Ğ´Ğ»Ñ product lists).

ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ğ» Ñ‡ĞµÑ€ĞµĞ· EXPLAIN ANALYZE Ñ‡Ñ‚Ğ¾ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ.
Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» integration Ñ‚ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ pagination Meta."

**Ğ­Ñ‚Ğ¾ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Middle thinking!**

**Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½:** ÑĞ¼. [performance-optimization.plan.mdc](./performance-optimization.plan.mdc)
