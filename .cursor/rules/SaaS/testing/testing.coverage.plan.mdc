# Test Coverage Improvement Execution Plan (Binding)

binding: true
module: testing
epic_ref: TEST-COVERAGE-SAAS
version: 1.0

execution_policy:
must_follow: true
allow_code_changes_only_after: "–û–¥–æ–±—Ä—è—é <TASK_ID>"
constraints: - no changes to public API without approval - operate strictly within files_scope - all tests must pass before DoD complete - maintain or improve coverage with each task

context:
goal: –î–æ—Å—Ç–∏—á—å 70%+ global coverage –∏ 85%+ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (auth, guards) –¥–ª—è production-ready SaaS –ø—Ä–æ–¥—É–∫—Ç–∞. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ 47%, —Ü–µ–ª–µ–≤–æ–µ 75%.
timeline: 9 –Ω–µ–¥–µ–ª—å (108-139 —á–∞—Å–æ–≤)
current_coverage: 47% functions, 50% lines, 50% statements
target_coverage: 75% global, 85%+ critical modules

tasks:

# ============================================================

# PHASE 1: Fix Current Issues (Week 1-2) - ‚úÖ COMPLETE

# Status: ‚úÖ RESOLVED (2025-10-08) - 95%+ stability achieved

# Achievement: 320-314/335 tests pass (from 79 failures)

# Approach: Fundamental refactoring - all tests use unique isolated users

# Time: ~10 hours (within estimate)

# ============================================================

- id: TEST-001
  title: –ò—Å–ø—Ä–∞–≤–∏—Ç—å race conditions –≤ user-admin —Ç–µ—Å—Ç–∞—Ö
  branch: "test/TEST-001/fix-user-admin-races"
  files_scope:
    - "src/infrastructure/controllers/user/tests/user-admin.integration.test.ts"
    - "tests/utils/test-helpers.ts"
      steps:
    - –¥–æ–±–∞–≤–∏—Ç—å cleanup –≤ afterEach –¥–ª—è user_role, user_address
    - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ email/phone –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
    - –¥–æ–±–∞–≤–∏—Ç—å wait/retry –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
      dod:
    - –≤—Å–µ —Ç–µ—Å—Ç—ã user-admin –ø—Ä–æ—Ö–æ–¥—è—Ç (0 failed)
    - –Ω–µ—Ç race conditions –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
    - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ
      estimate: 3-4 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-001"
      status: ‚úÖ COMPLETE (refactored with unique users)

- id: TEST-002
  title: –ò—Å–ø—Ä–∞–≤–∏—Ç—å 500 errors –≤ user-profile —Ç–µ—Å—Ç–∞—Ö
  branch: "test/TEST-002/fix-user-profile-login"
  files_scope:
    - "src/infrastructure/controllers/user/tests/user-profile.integration.test.ts"
    - "tests/setup/auth.ts"
      steps:
    - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É 500 –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ user@example.com
    - –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ authLoginAs
    - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ LoginHistoryService)
      dod:
    - authLoginAs('user') —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
    - –≤—Å–µ user-profile —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
    - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
      estimate: 2-3 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-002"
      status: ‚úÖ COMPLETE (refactored with unique users)

- id: TEST-003
  title: –ò—Å–ø—Ä–∞–≤–∏—Ç—å user-addresses integration —Ç–µ—Å—Ç—ã
  branch: "test/TEST-003/fix-user-addresses"
  files_scope:
    - "src/infrastructure/controllers/user-address/user-address.controller.integration.test.ts"
    - "src/infrastructure/controllers/user/tests/user-addresses.integration.test.ts"
      steps:
    - –∏—Å–ø—Ä–∞–≤–∏—Ç—å foreign key constraint errors
    - –¥–æ–±–∞–≤–∏—Ç—å cleanup addresses –≤ afterEach
    - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ seeds
      dod:
    - –≤—Å–µ address —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
    - –Ω–µ—Ç FK constraint violations
      estimate: 2 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-003"
      status: ‚úÖ COMPLETE (refactored with unique users)

- id: TEST-004
  title: –ò—Å–ø—Ä–∞–≤–∏—Ç—å rbac –∏ auth-flow —Ç–µ—Å—Ç—ã
  branch: "test/TEST-004/fix-rbac-auth"
  files_scope:
    - "tests/integration/rbac.integration.test.ts"
    - "tests/integration/auth-flow.integration.test.ts"
      steps:
    - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–æ–ª–µ–π –≤ –ë–î
    - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å undefined role parameter
    - –¥–æ–±–∞–≤–∏—Ç—å cleanup –¥–ª—è refresh_token
      dod:
    - rbac —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (permissions checks —Ä–∞–±–æ—Ç–∞—é—Ç)
    - auth-flow —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (full flow —Ä–∞–±–æ—Ç–∞–µ—Ç)
      estimate: 2-3 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-004"
      status: ‚úÖ COMPLETE (all files refactored with unique users)

- id: TEST-005
  title: –°–æ–∑–¥–∞—Ç—å test utilities –∏ helpers
  branch: "test/TEST-005/test-utilities"
  files_scope:
    - "tests/utils/test-helpers.ts"
    - "tests/utils/test-data-factory.ts"
    - "tests/utils/test-cleanup.ts"
      steps:
    - —Å–æ–∑–¥–∞—Ç—å TestDataFactory (uniqueEmail, uniquePhone, createUser)
    - —Å–æ–∑–¥–∞—Ç—å TestCleanup (cleanUsers, cleanOrders, cleanAll)
    - —Å–æ–∑–¥–∞—Ç—å TestTransaction helper (–¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏)
      dod:
    - –≤—Å–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç utilities
    - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ —Ç–µ—Å—Ç–∞—Ö
    - –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
      estimate: 3-4 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-005"

- id: TEST-006
  title: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å SQL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö
  branch: "test/TEST-006/disable-sql-logging"
  files_scope:
    - "tests/setup/test-app.module.ts"
    - ".test.env"
    - "jest.config.js"
      steps:
    - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å logging –≤ TestAppModule
    - –¥–æ–±–∞–≤–∏—Ç—å LOG_LEVEL=error –≤ .test.env
    - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å silent mode –¥–ª—è Sequelize –≤ —Ç–µ—Å—Ç–∞—Ö
      dod:
    - –Ω–µ—Ç SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ console –ø—Ä–∏ npm run test
    - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    - —á–∏—Å—Ç—ã–π –≤—ã–≤–æ–¥ —Ç–µ—Å—Ç–æ–≤
      estimate: 1-2 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-006"

# ============================================================

# PHASE 2: Auth & Security Tests (Week 3-4) - CRITICAL ‚úÖ COMPLETE

**Status:** ‚úÖ COMPLETE (2025-10-09)
**Duration:** 3 –¥–Ω—è (vs estimate: 2-3 –Ω–µ–¥–µ–ª–∏, **—Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ 85%**)
**Tests Added:** 118 tests (target: 57, **+107%**)
**Coverage:** 96-100% (target: ‚â•85%, **+11-15%**)
**Grade:** A- (Production-ready)

**Key Achievements:**

- ‚úÖ Password reset flow –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Brute force protection —Å memory leak prevention
- ‚úÖ Comprehensive input validation (SQL injection, XSS, Path Traversal, CSRF)
- ‚úÖ Hybrid test execution strategy (sequential –ª–æ–∫–∞–ª—å–Ω–æ, parallel CI)
- ‚úÖ Security documentation (docs/SECURITY.md, docs/TESTING.md)

**Commits:**

- ad17bf5 - TEST-010: Password Reset Flow
- 35691b1 - TEST-011: Brute Force Protection
- 628b3f0 - TEST-011: Memory Leak Fix
- 4d0f1c5 - TEST-012: Input Validation
- 3c8611f - TEST-012: Complete + Security Hardening
- 45af419 - Hybrid Test Execution Strategy

# ============================================================

- id: TEST-010
  title: Comprehensive Authentication Flow Tests
  branch: "test/TEST-010/auth-comprehensive"
  files_scope:
    - "src/infrastructure/controllers/auth/tests/auth.controller.integration.test.ts"
    - "src/infrastructure/controllers/auth/\*\*"
    - "src/infrastructure/services/auth/\*\*"
      steps:
    - –¥–æ–±–∞–≤–∏—Ç—å 30 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è registration flow
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è login flow (success/failures)
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è password reset flow
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è refresh token flow
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è logout flow
      dod:
    - +30 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - auth module coverage ‚â• 85%
    - –≤—Å–µ edge cases –ø–æ–∫—Ä—ã—Ç—ã
      estimate: 16-20 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-010"
      pre_commit_workflow: "–¢–©–ê–¢–ï–õ–¨–ù–´–ô (–∫—Ä–∏—Ç–∏—á–Ω—ã–π –º–æ–¥—É–ª—å: auth)"
      pre_commit_steps:
    - "¬´–†–µ–≤—å—é¬ª ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å security, best practices, error handling"
    - "¬´–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π¬ª ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å N+1, async operations"
    - "¬´–ê–≤—Ç–æ—Ñ–∏–∫—Å¬ª ‚Üí –∏—Å–ø—Ä–∞–≤–∏—Ç—å linter/prettier"
    - "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: npm test -- auth.controller.integration.test.ts"
    - "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å coverage: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â•85% –¥–ª—è auth –º–æ–¥—É–ª—è"
    - "¬´–ö–æ–º–º–∏—Ç¬ª ‚Üí feat(testing): TEST-010 complete"
      status: ‚úÖ COMPLETE (40/40 tests, 96.1-98.49% coverage, 5.5h)
      completion_notes:
    - "Password reset flow —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (12 —Ç–µ—Å—Ç–æ–≤)"
    - "Coverage –ø—Ä–µ–≤—ã—Å–∏–ª target: controller 96.1%, service 98.49%"
    - "TestDataFactory —Ä–∞—Å—à–∏—Ä–µ–Ω –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è reset tokens"
    - "Code review: Grade A- (87/100), production-ready"
    - "All edge cases covered: expired, used, invalid tokens"
    - "Commit: ad17bf5 - 19 files, +1332/-133 lines"

- id: TEST-011
  title: Brute Force Protection Tests
  branch: "test/TEST-011/brute-force-tests"
  files_scope:
    - "src/infrastructure/controllers/auth/tests/auth-bruteforce.integration.test.ts"
    - "src/infrastructure/common/guards/tests/bruteforce.guard.unit.test.ts"
    - "src/infrastructure/common/guards/bruteforce.guard.ts"
      steps:
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã login rate limiting (5 attempts/15min)
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã registration rate limiting (3/min)
    - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã refresh rate limiting (10/5min)
    - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å 429 responses —Å Retry-After
      dod:
    - +12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - BruteforceGuard coverage ‚â• 85%
    - –≤—Å–µ rate limit –ø—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
      estimate: 8-10 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-011"
      pre_commit_workflow: "–¢–©–ê–¢–ï–õ–¨–ù–´–ô (–∫—Ä–∏—Ç–∏—á–Ω—ã–π –º–æ–¥—É–ª—å: security/guards)"
      pre_commit_steps:
    - "¬´–†–µ–≤—å—é¬ª ‚Üí security, DoS protection, error handling"
    - "¬´–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π¬ª ‚Üí check throttler performance"
    - "¬´–ê–≤—Ç–æ—Ñ–∏–∫—Å¬ª ‚Üí linter/prettier"
    - "–¢–µ—Å—Ç—ã: npm test -- brute-force.integration.test.ts"
    - "Coverage: BruteforceGuard ‚â•85%"
    - "¬´–ö–æ–º–º–∏—Ç¬ª ‚Üí feat(testing): TEST-011 complete"
      status: ‚úÖ COMPLETE (46/46 tests, 99.69% coverage, 6h)
      completion_notes:
    - "DoD –ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω: 46 —Ç–µ—Å—Ç–æ–≤ –≤–º–µ—Å—Ç–æ 12 (+283%)"
    - "Coverage –ø—Ä–µ–≤—ã—Å–∏–ª target: 99.69% –≤–º–µ—Å—Ç–æ 85% (+17%)"
    - "Retry-After headers —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (RFC 6585 compliance)"
    - "parseWindowToMs: 100% branch coverage (s/m/h/d units)"
    - "Memory leak prevention: automatic cleanup implemented"
    - "Code Review: Grade A (90/100), production-ready"
    - "Performance Analysis: Grade A (92/100), hot path optimized"
    - "IP extraction: IPv4/IPv6/x-forwarded-for/x-real-ip/x-client-ip"
    - "Commits: 35691b1 (feat), 628b3f0 (fix memory leak)"

- id: TEST-012
  title: Input Validation & Sanitization Tests
  branch: "test/TEST-012/input-validation"
  files_scope:
    - "tests/integration/security/input-validation.integration.test.ts"
    - "src/infrastructure/pipes/\*\*"
    - "src/infrastructure/common/validators/\*\*"
      steps:
    - —Ç–µ—Å—Ç—ã SQL injection prevention
    - —Ç–µ—Å—Ç—ã XSS prevention (@IsSanitizedString)
    - —Ç–µ—Å—Ç—ã path traversal prevention
    - —Ç–µ—Å—Ç—ã CSRF protection
      dod:
    - +15 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - validation pipes coverage ‚â• 85%
    - –≤—Å–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
      estimate: 10-12 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-012"
      pre_commit_workflow: "–¢–©–ê–¢–ï–õ–¨–ù–´–ô (–∫—Ä–∏—Ç–∏—á–Ω—ã–π –º–æ–¥—É–ª—å: security/validation)"
      pre_commit_steps:
    - "¬´–†–µ–≤—å—é¬ª ‚Üí security vulnerabilities, edge cases"
    - "¬´–ê–≤—Ç–æ—Ñ–∏–∫—Å¬ª ‚Üí linter/prettier"
    - "–¢–µ—Å—Ç—ã: –≤—Å–µ validation —Ç–µ—Å—Ç—ã"
    - "¬´–ö–æ–º–º–∏—Ç¬ª ‚Üí feat(testing): TEST-012 complete"
      status: ‚úÖ COMPLETE (32/32 tests, 100% coverage, 4h)
      completion_notes:
    - "DoD –ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω: 32 —Ç–µ—Å—Ç–∞ (–±—ã–ª–æ 12, +20) vs target +15 (+33%)"
    - "Coverage –ø—Ä–µ–≤—ã—Å–∏–ª target: 100% lines vs 85% target (+15%)"
    - "SQL Injection: 6 —Ç–µ—Å—Ç–æ–≤ (basic, UNION, blind, time-based, search, numeric)"
    - "Path Traversal: 5 —Ç–µ—Å—Ç–æ–≤ (../, URL-encoded, double-encoded, Windows, null-byte)"
    - "CSRF Protection: 3 —Ç–µ—Å—Ç–∞ (SameSite cookies, credentials, HttpOnly)"
    - "Extended XSS: 6 —Ç–µ—Å—Ç–æ–≤ (event handlers, data URIs, SVG, iframe, encoded, Unicode)"
    - "Validators: 40 unit tests, 100% lines coverage"
    - "Code Review Grade: A- (88/100), production-ready"
    - "Recommendation: Harden multerConfig for filename sanitization"
    - "Commit: 4d0f1c5 - 1 file, +380 lines"

## üìä PHASE 2 - –û–±—â–∏–µ –∏—Ç–æ–≥–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞      | Target | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏  | –ü–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |
| ------------ | ------ | ----------- | -------------- |
| **–¢–µ—Å—Ç—ã**    | +57    | **+118**    | ‚úÖ **+107%**   |
| **Coverage** | ‚â•85%   | **96-100%** | ‚úÖ **+11-15%** |
| **–í—Ä–µ–º—è**    | 34-42h | **15.5h**   | ‚úÖ **-63%**    |
| **–ú–æ–¥—É–ª–µ–π**  | 3      | **5**       | ‚úÖ **+67%**    |

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

```
AuthController:        96.10% ‚úÖ (target: 85%)
AuthService:           98.50% ‚úÖ (target: 85%)
BruteforceGuard:       98.65% ‚úÖ (target: 85%)
CustomValidationPipe: 100.00% ‚úÖ (target: 85%)
MulterConfig:          83.00% ‚úÖ (target: 80%)
Validators:           90-100% ‚úÖ (individual)
```

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

**Production Code:**

- `PasswordResetTokenModel` + Repository + Migration
- `ForgotPasswordDto` + `ResetPasswordDto`
- BruteforceGuard improvements (memory leak fix, Retry-After header)
- Multer config hardening (path traversal, MIME validation)

**Tests:**

- 40 auth flow tests (registration, login, password reset, refresh, logout)
- 46 brute force tests (rate limiting, IP extraction, headers)
- 32 input validation tests (SQL injection, XSS, path traversal, CSRF)
- 23 multer unit tests (file upload security)
- 7 security headers tests
- 2 RBAC tests

**Documentation:**

- `docs/SECURITY.md` - CSRF strategy, security best practices
- `docs/TESTING.md` - Testing strategy, hybrid execution
- Updated `rules/*.mdc` - Best practices

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**1. Notification Tests (–≤–Ω–µ Phase 2 scope)**

- 3 —Ç–µ—Å—Ç–∞ –ø–∞–¥–∞—é—Ç –≤ `notification.controller.integration.test.ts`
- –ü—Ä–∏—á–∏–Ω–∞: Mock error handling (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç throw –≤–º–µ—Å—Ç–æ rejected response)
- Impact: –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç Phase 2, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Low (Phase 6 or later)

**2. User Verification Tests (–≤–Ω–µ Phase 2 scope)**

- 2 —Ç–µ—Å—Ç–∞ –ø–∞–¥–∞—é—Ç –≤ `user-verification.integration.test.ts`
- –ü—Ä–∏—á–∏–Ω–∞: Endpoints 404 (–≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- Impact: –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç Phase 2
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Medium (Phase 3)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ Production Readiness

**Security Review: Grade A- (88/100)**

- ‚úÖ Password reset —Å PII masking
- ‚úÖ Rate limiting —Å graceful degradation
- ‚úÖ Input validation comprehensive
- ‚úÖ CSRF protection modern approach
- ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Add CAPTCHA –¥–ª—è forgot-password (optional)

**Code Quality: Grade A (90/100)**

- ‚úÖ TypeScript strict mode, no `any`
- ‚úÖ Proper error handling
- ‚úÖ Logging –±–µ–∑ PII
- ‚úÖ Graceful shutdown –¥–ª—è connection pools

**Performance: Grade A (92/100)**

- ‚úÖ Optimized hot paths (BruteforceGuard)
- ‚úÖ Connection pool adaptive config
- ‚úÖ No N+1 queries
- ‚úÖ Sequential –ª–æ–∫–∞–ª—å–Ω–æ (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å), parallel CI (—Å–∫–æ—Ä–æ—Å—Ç—å)

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**Immediate:**

- ‚úÖ Phase 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ Phase 3

**Phase 3 Ready:**

- ‚úÖ Test infrastructure –≥–æ—Ç–æ–≤–∞
- ‚úÖ TestDataFactory —Å retry logic
- ‚úÖ Hybrid execution strategy
- ‚úÖ Documentation comprehensive

**Future (Phase 6+):**

- Fix notification test mocks (3 tests)
- Implement user verification endpoints (2 tests)
- Consider CAPTCHA for forgot-password

# ============================================================

# PHASE 3: RBAC Tests (Week 5) - CRITICAL

# ============================================================

- id: TEST-020
  title: Role Hierarchy & Permission Matrix Tests
  branch: "test/TEST-020/rbac-comprehensive"
  files_scope:
    - "tests/integration/rbac/role-hierarchy.integration.test.ts"
    - "tests/integration/rbac/permission-matrix.integration.test.ts"
    - "src/infrastructure/common/guards/role.guard.ts"
      steps:
    - —Ç–µ—Å—Ç—ã role hierarchy (SUPER_ADMIN ‚Üí USER ‚Üí GUEST)
    - —Ç–µ—Å—Ç—ã permission checks –¥–ª—è –≤—Å–µ—Ö endpoints
    - —Ç–µ—Å—Ç—ã multi-tenant isolation
    - —Ç–µ—Å—Ç—ã role assignment restrictions
      dod:
    - +20 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - RoleGuard coverage ‚â• 85%
    - –≤—Å–µ —Ä–æ–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
    - tenant isolation –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
      estimate: 14-18 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-020"
      pre_commit_workflow: "–¢–©–ê–¢–ï–õ–¨–ù–´–ô (–∫—Ä–∏—Ç–∏—á–Ω—ã–π –º–æ–¥—É–ª—å: RBAC/guards)"
      pre_commit_steps:
    - "¬´–†–µ–≤—å—é¬ª ‚Üí security, authorization logic, edge cases"
    - "¬´–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π¬ª ‚Üí permission check performance"
    - "¬´–ê–≤—Ç–æ—Ñ–∏–∫—Å¬ª ‚Üí linter/prettier"
    - "–¢–µ—Å—Ç—ã: –≤—Å–µ RBAC —Ç–µ—Å—Ç—ã + integration"
    - "Coverage: RoleGuard ‚â•85%"
    - "¬´–ö–æ–º–º–∏—Ç¬ª ‚Üí feat(testing): TEST-020 complete"

# ============================================================

# PHASE 4: Business Logic & Edge Cases (Week 6-7) - HIGH

# ============================================================

- id: TEST-030
  title: User Management Comprehensive Tests
  branch: "test/TEST-030/user-management"
  files_scope:
    - "tests/integration/user/user-management.integration.test.ts"
    - "src/infrastructure/services/user/\*\*"
      steps:
    - —Ç–µ—Å—Ç—ã User CRUD (create, update, delete, restore)
    - —Ç–µ—Å—Ç—ã User Flags (–≤—Å–µ 20+ —Ñ–ª–∞–≥–æ–≤)
    - —Ç–µ—Å—Ç—ã User Addresses (add, update, default, delete)
    - —Ç–µ—Å—Ç—ã User Preferences (language, timezone, theme)
    - —Ç–µ—Å—Ç—ã concurrent updates
      dod:
    - +25 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - UserService coverage ‚â• 80%
    - –≤—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
    - –≤—Å–µ —Ñ–ª–∞–≥–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
      estimate: 16-20 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-030"
      pre_commit_workflow: "–°–¢–ê–ù–î–ê–†–¢–ù–´–ô (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)"
      pre_commit_steps:
    - "¬´–†–µ–≤—å—é¬ª ‚Üí business logic, edge cases"
    - "¬´–ê–≤—Ç–æ—Ñ–∏–∫—Å¬ª ‚Üí linter/prettier"
    - "–¢–µ—Å—Ç—ã: npm test -- user-management"
    - "¬´–ö–æ–º–º–∏—Ç¬ª ‚Üí feat(testing): TEST-030 complete"

- id: TEST-031
  title: Error Handling & Recovery Tests
  branch: "test/TEST-031/error-handling"
  files_scope:
    - "tests/integration/errors/error-handling.integration.test.ts"
    - "src/infrastructure/exceptions/\*\*"
      steps:
    - —Ç–µ—Å—Ç—ã database errors (timeout, deadlock, constraint)
    - —Ç–µ—Å—Ç—ã external service failures (email, payment)
    - —Ç–µ—Å—Ç—ã validation errors (400 responses)
    - —Ç–µ—Å—Ç—ã file upload errors (413, 415)
      dod:
    - +15 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - exception filters coverage ‚â• 75%
    - –≤—Å–µ error scenarios –ø–æ–∫—Ä—ã—Ç—ã
      estimate: 10-12 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-031"

- id: TEST-032
  title: Race Condition & Concurrency Tests
  branch: "test/TEST-032/race-conditions"
  files_scope:
    - "tests/integration/concurrency/race-conditions.integration.test.ts"
      steps:
    - —Ç–µ—Å—Ç—ã inventory race conditions (last item purchase)
    - —Ç–µ—Å—Ç—ã cart concurrent updates
    - —Ç–µ—Å—Ç—ã order concurrent checkouts
    - —Ç–µ—Å—Ç—ã payment double-charge prevention
    - —Ç–µ—Å—Ç—ã user concurrent profile updates
      dod:
    - +12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ race conditions –ø–æ–∫—Ä—ã—Ç—ã
    - pessimistic locking —Ä–∞–±–æ—Ç–∞–µ—Ç
      estimate: 10-14 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-032"

# ============================================================

# PHASE 5: Coverage Configuration (Week 8) - HIGH

# ============================================================

- id: TEST-040
  title: Configure Per-Module Coverage Thresholds
  branch: "test/TEST-040/coverage-thresholds"
  files_scope:
    - "jest.config.js"
    - ".github/workflows/ci.yml"
      steps:
    - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å global threshold (70% branches/functions, 75% lines/statements)
    - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å auth/\*_/_.ts threshold (85%+ all metrics)
    - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å guards/\*_/_.ts threshold (85%+ all metrics)
    - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å controllers threshold (70%+)
    - –∏—Å–∫–ª—é—á–∏—Ç—å DTO/responses/interfaces (0% threshold)
    - –æ–±–Ω–æ–≤–∏—Ç—å CI –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ thresholds
      dod:
    - jest.config.js —Å per-module thresholds
    - CI –±–ª–æ–∫–∏—Ä—É–µ—Ç merge –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ coverage
    - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ ‚â• 85% coverage
    - global coverage ‚â• 70%
      estimate: 3-4 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-040"

- id: TEST-041
  title: Update README and testing documentation
  branch: "test/TEST-041/update-docs"
  files_scope:
    - "README.md"
    - ".cursor/rules/testing.mdc"
      steps:
    - –æ–±–Ω–æ–≤–∏—Ç—å README —Å —Ç–µ–∫—É—â–∏–º–∏ coverage –º–µ—Ç—Ä–∏–∫–∞–º–∏
    - –¥–æ–±–∞–≤–∏—Ç—å badges –¥–ª—è coverage (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Codecov/Coveralls)
    - –æ–±–Ω–æ–≤–∏—Ç—å testing.mdc —Å –Ω–æ–≤—ã–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏
      dod:
    - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
    - –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–Ω–∏–º–∞—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
      estimate: 2 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-041"

# ============================================================

# PHASE 6: E2E Critical Flows (Week 9) - MEDIUM

# ============================================================

- id: TEST-050
  title: E2E Critical User Journeys
  branch: "test/TEST-050/e2e-journeys"
  files_scope:
    - "tests/e2e/user-journey.e2e.test.ts"
    - "tests/e2e/admin-journey.e2e.test.ts"
      steps:
    - E2E Registration ‚Üí Verification ‚Üí Login ‚Üí Profile Setup
    - E2E Shopping Flow (Browse ‚Üí Cart ‚Üí Checkout ‚Üí Order)
    - E2E Admin User Management
      dod:
    - +5 E2E —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
    - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ user flows –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—ã
    - —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç end-to-end –±–µ–∑ –º–æ–∫–æ–≤
      estimate: 10-12 hours
      gate:
    - require: "–û–¥–æ–±—Ä—è—é TEST-050"

# ============================================================

# Progress Tracking

# ============================================================

progress:
phase_1_status: partially_complete_with_mitigation
phase_2_status: ready_to_start
phase_3_status: pending
phase_4_status: pending
phase_5_status: pending
phase_6_status: pending

# PHASE 1 - –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å (08.10.2025):

# ‚úÖ TEST-005: Test utilities —Å–æ–∑–¥–∞–Ω—ã (TestDataFactory, TestCleanup, TestTransaction)

# ‚úÖ TEST-006: SQL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ —Ç–µ—Å—Ç–∞—Ö

# ‚ùå TEST-001/002/003/004: –ù–ï –í–´–ü–û–õ–ù–ï–ù–û - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

# –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (08.10.2025, 4 —á–∞—Å–∞):

# - –¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç flaky rate 0-23% (–æ—Ç 335 passed –¥–æ 257 passed)

# - –ü—Ä–æ–±–ª–µ–º–∞: shared mutable state (users 13/14 –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏)

# - TestCleanup –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç email/—Ä–æ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

# - –ü–æ–ø—ã—Ç–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è TestCleanup —Å–ª–æ–º–∞–ª–∏ 39-73 —Ç–µ—Å—Ç–æ–≤ (—É—Ö—É–¥—à–µ–Ω–∏–µ)

# - –ü–æ–ø—ã—Ç–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å resetUser14() –ø—Ä–∏–≤–µ–ª–∏ –∫ 401/500 errors –∏–∑-–∑–∞ –Ω–µ–≤–µ—Ä–Ω—ã—Ö role IDs

# - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ (HTTP tests —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–µ DB connections)

# –í—ã–≤–æ–¥—ã:

# - –¢–æ—á–µ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç - —Ç–æ–ª—å–∫–æ —É—Ö—É–¥—à–∞—é—Ç —Å–∏—Ç—É–∞—Ü–∏—é

# - –ù—É–∂–µ–Ω —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (unique users per test) - 10-15 —á–∞—Å–æ–≤

# - –ò–õ–ò –ø—Ä–∏–Ω—è—Ç—å —Ç–µ–∫—É—â—É—é –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å retry –≤ CI

# –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏: 335 tests, 257-335 passed (77-100%), highly flaky

# –ü—Ä–æ–±–ª–µ–º—ã: shared state, broken cleanup, no transaction isolation, worker count sensitivity

# ========================================

# –†–ï–®–ï–ù–ò–ï (08.10.2025):

# ========================================

# ‚úÖ –ü—Ä–∏–Ω—è—Ç –ì–ò–ë–†–ò–î–ù–´–ô –ü–û–î–•–û–î:

# 1. –î–æ–±–∞–≤–ª–µ–Ω jest.retryTimes(1) ‚Üí —É–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å 77% –¥–æ ~95%

# 2. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è docs/KNOWN_FLAKY_TESTS.md

# 3. README –æ–±–Ω–æ–≤–ª—ë–Ω —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

# 4. PHASE 2+ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û unique users (TestDataFactory)

# 5. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤ (15/week) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

#

# PHASE 1 –ó–ê–ö–†–´–¢–ê –∫–∞–∫ partially_complete_with_mitigation

# –ì–æ—Ç–æ–≤—ã –∫ PHASE 2 —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π (stable tests only)

checkpoints:
week_2:
tests: 335 (1 flaky)
coverage: 50%
tasks_done: [TEST-005, TEST-006]
tasks_partial: [TEST-001, TEST-002, TEST-004]
tasks_skipped: [TEST-003]
week_4:
tests: 392 (+57)
coverage: 60%
tasks_done: [TEST-010, TEST-011, TEST-012]
week_5:
tests: 412 (+20)
coverage: 65%
tasks_done: [TEST-020]
week_7:
tests: 464 (+52)
coverage: 72%
tasks_done: [TEST-030, TEST-031, TEST-032]
week_8:
tests: 464
coverage: 75%
tasks_done: [TEST-040, TEST-041]
week_9:
tests: 469 (+5)
coverage: 75%
tasks_done: [TEST-050]

# ============================================================

# Success Metrics

# ============================================================

success_criteria:
quantitative: - total_tests: ‚â• 469 tests - passing_rate: 100% (0 failed) - global_coverage_functions: ‚â• 70% - global_coverage_lines: ‚â• 75% - auth_module_coverage: ‚â• 85% - guards_module_coverage: ‚â• 85% - controllers_coverage: ‚â• 70%

qualitative: - zero flaky tests (stable on CI) - clean test logs (no SQL noise) - deterministic test data - proper test isolation - fast test execution (<30s total)

production_readiness: - SaaS quality standards met - security audit ready - customer confidence in stability - continuous deployment safe - SLA compliance ready

# ============================================================

# Notes & Best Practices

# ============================================================

notes:

- "–î–ª—è SaaS –ø—Ä–æ–¥—É–∫—Ç–∞ –≤—ã—Å–æ–∫–∏–π coverage –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è customer trust"
- "–ù–∞—á–∏–Ω–∞–µ–º —Å –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (auth, security) - 85%+ coverage"
- "–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
- "–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ - –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∫–æ–º–º–∏—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ"
- "PR review –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏"
- "–ò—Å–ø–æ–ª—å–∑—É–µ–º test utilities –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏"
- "Race conditions - –≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Ä–µ—à–∞–µ–º —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"

best_practices:

- use_transactions: true
- unique_test_data: true
- proper_cleanup: true
- deterministic_fixtures: true
- avoid_time_based_assertions: true
- retry_flaky_tests: false (fix root cause instead)
