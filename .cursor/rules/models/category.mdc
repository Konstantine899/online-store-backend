# –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Category System) - Ecommerce Edition

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ü–µ–ª—å
–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è ecommerce –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø—Ä–æ—Å—Ç–æ–π –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±—ã—Å—Ç—Ä—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∏ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –Ω–∞–∑–≤–∞–Ω–∏–µ, slug, –æ–ø–∏—Å–∞–Ω–∏–µ
- **–ú–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–∞-–ø–æ–ª—è
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **–°–≤—è–∑–∏** - —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –±—Ä–µ–Ω–¥–∞–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `categories`
```sql
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(255) NOT NULL UNIQUE,
    description TEXT,
    image VARCHAR(500),
    parent_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,
    meta_title VARCHAR(255),
    meta_description TEXT,
    is_active BOOLEAN DEFAULT true,
    sort_order INTEGER DEFAULT 0,
    product_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## –ú–æ–¥–µ–ª–∏ Sequelize

### Category Model
```typescript
// src/domain/models/category.model.ts
import { Model, DataType, Column, Table, BelongsTo, HasMany, ForeignKey } from 'sequelize-typescript';
import { ProductModel } from './product.model';

interface ICategoryModel {
    id: number;
    name: string;
    slug: string;
    description?: string;
    image?: string;
    parentId?: number;
    parent?: CategoryModel;
    children: CategoryModel[];
    metaTitle?: string;
    metaDescription?: string;
    isActive: boolean;
    sortOrder: number;
    productCount: number;
    products: ProductModel[];
    createdAt: Date;
    updatedAt: Date;
}

interface ICategoryCreationAttributes {
    name: string;
    slug: string;
    description?: string;
    image?: string;
    parentId?: number;
    metaTitle?: string;
    metaDescription?: string;
    isActive?: boolean;
    sortOrder?: number;
}

@Table({
    tableName: 'categories',
    underscored: true,
    timestamps: true,
    indexes: [
        { fields: ['slug'], name: 'idx_categories_slug', unique: true },
        { fields: ['parent_id'], name: 'idx_categories_parent_id' },
        { fields: ['is_active'], name: 'idx_categories_is_active' },
        { fields: ['sort_order'], name: 'idx_categories_sort_order' },
        { fields: ['product_count'], name: 'idx_categories_product_count' },
    ],
})
export class CategoryModel
    extends Model<CategoryModel, ICategoryCreationAttributes>
    implements ICategoryModel
{
    @Column({
        type: DataType.INTEGER,
        primaryKey: true,
        autoIncrement: true,
    })
    declare id: number;

    @Column({
        type: DataType.STRING(255),
        allowNull: false,
    })
    declare name: string;

    @Column({
        type: DataType.STRING(255),
        allowNull: false,
        unique: true,
    })
    declare slug: string;

    @Column({
        type: DataType.TEXT,
        allowNull: true,
    })
    declare description: string;

    @Column({
        type: DataType.STRING(500),
        allowNull: true,
    })
    declare image: string;

    @ForeignKey(() => CategoryModel)
    @Column({
        type: DataType.INTEGER,
        allowNull: true,
        field: 'parent_id',
    })
    declare parentId: number;

    @Column({
        type: DataType.STRING(255),
        allowNull: true,
        field: 'meta_title',
    })
    declare metaTitle: string;

    @Column({
        type: DataType.TEXT,
        allowNull: true,
        field: 'meta_description',
    })
    declare metaDescription: string;

    @Column({
        type: DataType.BOOLEAN,
        allowNull: false,
        defaultValue: true,
        field: 'is_active',
    })
    declare isActive: boolean;

    @Column({
        type: DataType.INTEGER,
        allowNull: false,
        defaultValue: 0,
        field: 'sort_order',
    })
    declare sortOrder: number;

    @Column({
        type: DataType.INTEGER,
        allowNull: false,
        defaultValue: 0,
        field: 'product_count',
    })
    declare productCount: number;

    @BelongsTo(() => CategoryModel, 'parentId')
    declare parent: CategoryModel;

    @HasMany(() => CategoryModel, 'parentId')
    declare children: CategoryModel[];

    @HasMany(() => ProductModel)
    declare products: ProductModel[];
}
```

## –°–µ—Ä–≤–∏—Å—ã

### Category Service
```typescript
// src/infrastructure/services/category.service.ts
import { Injectable, Logger, NotFoundException, BadRequestException } from '@nestjs/common';
import { InjectModel } from '@nestjs/sequelize';
import { CategoryModel } from '@app/domain/models/category.model';
import { ProductModel } from '@app/domain/models/product.model';
import { Op } from 'sequelize';

@Injectable()
export class CategoryService {
    private readonly logger = new Logger(CategoryService.name);

    constructor(
        @InjectModel(CategoryModel)
        private categoryModel: typeof CategoryModel,
        @InjectModel(ProductModel)
        private productModel: typeof ProductModel,
    ) {}

    async findAll(
        page: number = 1,
        limit: number = 10,
        search?: string,
        isActive?: boolean,
        parentId?: number,
    ): Promise<{ data: CategoryModel[]; total: number }> {
        const where: any = {};

        if (search) {
            where[Op.or] = [
                { name: { [Op.iLike]: `%${search}%` } },
                { description: { [Op.iLike]: `%${search}%` } },
            ];
        }

        if (isActive !== undefined) {
            where.isActive = isActive;
        }

        if (parentId !== undefined) {
            where.parentId = parentId;
        }

        const { rows: categories, count: total } = await this.categoryModel.findAndCountAll({
            where,
            order: [['sort_order', 'ASC'], ['name', 'ASC']],
            limit,
            offset: (page - 1) * limit,
            include: [
                {
                    model: CategoryModel,
                    as: 'parent',
                    attributes: ['id', 'name', 'slug'],
                },
                {
                    model: CategoryModel,
                    as: 'children',
                    attributes: ['id', 'name', 'slug', 'product_count'],
                    where: { isActive: true },
                    required: false,
                },
            ],
        });

        return { data: categories, total };
    }

    async findById(id: number): Promise<CategoryModel> {
        const category = await this.categoryModel.findByPk(id, {
            include: [
                {
                    model: CategoryModel,
                    as: 'parent',
                    attributes: ['id', 'name', 'slug'],
                },
                {
                    model: CategoryModel,
                    as: 'children',
                    attributes: ['id', 'name', 'slug', 'product_count'],
                    where: { isActive: true },
                    required: false,
                },
            ],
        });

        if (!category) {
            throw new NotFoundException('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        }

        return category;
    }

    async findBySlug(slug: string): Promise<CategoryModel> {
        const category = await this.categoryModel.findOne({
            where: { slug, isActive: true },
            include: [
                {
                    model: CategoryModel,
                    as: 'parent',
                    attributes: ['id', 'name', 'slug'],
                },
                {
                    model: CategoryModel,
                    as: 'children',
                    attributes: ['id', 'name', 'slug', 'product_count'],
                    where: { isActive: true },
                    required: false,
                },
            ],
        });

        if (!category) {
            throw new NotFoundException('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        }

        return category;
    }

    async create(categoryData: Partial<CategoryModel>): Promise<CategoryModel> {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug
        const existingCategory = await this.categoryModel.findOne({
            where: { slug: categoryData.slug },
        });

        if (existingCategory) {
            throw new BadRequestException('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–∞–∫–∏–º slug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        if (categoryData.parentId) {
            const parentCategory = await this.categoryModel.findByPk(categoryData.parentId);
            if (!parentCategory) {
                throw new BadRequestException('–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
        }

        const category = await this.categoryModel.create(categoryData);
        this.logger.log(`Category created: ${category.name} (${category.slug})`);
        return category;
    }

    async update(id: number, categoryData: Partial<CategoryModel>): Promise<CategoryModel> {
        const category = await this.findById(id);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
        if (categoryData.slug && categoryData.slug !== category.slug) {
            const existingCategory = await this.categoryModel.findOne({
                where: { slug: categoryData.slug },
            });

            if (existingCategory) {
                throw new BadRequestException('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–∞–∫–∏–º slug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        if (categoryData.parentId) {
            if (categoryData.parentId === id) {
                throw new BadRequestException('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–º —Å–∞–º–æ–π —Å–µ–±–µ');
            }

            const parentCategory = await this.categoryModel.findByPk(categoryData.parentId);
            if (!parentCategory) {
                throw new BadRequestException('–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
        }

        await category.update(categoryData);
        this.logger.log(`Category updated: ${category.name} (${category.slug})`);
        return category;
    }

    async delete(id: number): Promise<void> {
        const category = await this.findById(id);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const productCount = await this.productModel.count({
            where: { categoryId: id },
        });

        if (productCount > 0) {
            throw new BadRequestException('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã');
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const childrenCount = await this.categoryModel.count({
            where: { parentId: id },
        });

        if (childrenCount > 0) {
            throw new BadRequestException('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —É –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
        }

        await category.destroy();
        this.logger.log(`Category deleted: ${category.name} (${category.slug})`);
    }

    async getTree(): Promise<CategoryModel[]> {
        return this.categoryModel.findAll({
            where: { isActive: true },
            order: [['sort_order', 'ASC'], ['name', 'ASC']],
            include: [
                {
                    model: CategoryModel,
                    as: 'children',
                    where: { isActive: true },
                    required: false,
                    include: [
                        {
                            model: CategoryModel,
                            as: 'children',
                            where: { isActive: true },
                            required: false,
                        },
                    ],
                },
            ],
        });
    }

    async getRootCategories(): Promise<CategoryModel[]> {
        return this.categoryModel.findAll({
            where: { 
                parentId: null,
                isActive: true 
            },
            order: [['sort_order', 'ASC'], ['name', 'ASC']],
            include: [
                {
                    model: CategoryModel,
                    as: 'children',
                    where: { isActive: true },
                    required: false,
                },
            ],
        });
    }

    async getChildren(parentId: number): Promise<CategoryModel[]> {
        return this.categoryModel.findAll({
            where: { 
                parentId,
                isActive: true 
            },
            order: [['sort_order', 'ASC'], ['name', 'ASC']],
            include: [
                {
                    model: CategoryModel,
                    as: 'children',
                    where: { isActive: true },
                    required: false,
                },
            ],
        });
    }

    async updateProductCount(categoryId: number): Promise<void> {
        const productCount = await this.productModel.count({
            where: { categoryId, isActive: true },
        });

        await this.categoryModel.update(
            { productCount },
            { where: { id: categoryId } }
        );
    }

    async searchCategories(query: string, limit: number = 10): Promise<CategoryModel[]> {
        return this.categoryModel.findAll({
            where: {
                isActive: true,
                [Op.or]: [
                    { name: { [Op.iLike]: `%${query}%` } },
                    { description: { [Op.iLike]: `%${query}%` } },
                ],
            },
            order: [['name', 'ASC']],
            limit,
            attributes: ['id', 'name', 'slug', 'description', 'image'],
        });
    }
}
```

## –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

### Category Controller
```typescript
// src/infrastructure/controllers/category.controller.ts
import { Controller, Get, Post, Put, Delete, Param, Body, Query, HttpCode, HttpStatus } from '@nestjs/common';
import { ApiTags, ApiOperation, ApiResponse, ApiQuery } from '@nestjs/swagger';
import { CategoryService } from '@app/infrastructure/services/category.service';
import { CreateCategoryDto } from '@app/infrastructure/dto/category/create-category.dto';
import { UpdateCategoryDto } from '@app/infrastructure/dto/category/update-category.dto';
import { CategoryResponse, CategoryListResponse } from '@app/infrastructure/responses/category/category.response';

@ApiTags('–ö–∞—Ç–µ–≥–æ—Ä–∏–∏')
@Controller('categories')
export class CategoryController {
    constructor(private readonly categoryService: CategoryService) {}

    @Get()
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π' })
    @ApiQuery({ name: 'page', required: false, description: '–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã' })
    @ApiQuery({ name: 'limit', required: false, description: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ' })
    @ApiQuery({ name: 'search', required: false, description: '–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é' })
    @ApiQuery({ name: 'isActive', required: false, description: '–§–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏' })
    @ApiQuery({ name: 'parentId', required: false, description: '–§–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    @ApiResponse({ status: 200, description: '–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—É—á–µ–Ω', type: CategoryListResponse })
    async getCategories(
        @Query('page') page: number = 1,
        @Query('limit') limit: number = 10,
        @Query('search') search?: string,
        @Query('isActive') isActive?: boolean,
        @Query('parentId') parentId?: number,
    ): Promise<CategoryListResponse> {
        const result = await this.categoryService.findAll(page, limit, search, isActive, parentId);
        
        return {
            data: result.data.map(category => ({
                id: category.id,
                name: category.name,
                slug: category.slug,
                description: category.description,
                image: category.image,
                parentId: category.parentId,
                parent: category.parent,
                children: category.children,
                metaTitle: category.metaTitle,
                metaDescription: category.metaDescription,
                productCount: category.productCount,
                createdAt: category.createdAt,
                updatedAt: category.updatedAt,
            })),
            meta: {
                totalCount: result.total,
                currentPage: page,
                limit,
                lastPage: Math.ceil(result.total / limit),
                nextPage: page < Math.ceil(result.total / limit) ? page + 1 : null,
                previousPage: page > 1 ? page - 1 : null,
            },
        };
    }

    @Get('tree')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π' })
    @ApiResponse({ status: 200, description: '–î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—É—á–µ–Ω–æ', type: [CategoryResponse] })
    async getCategoryTree(): Promise<CategoryResponse[]> {
        const categories = await this.categoryService.getTree();
        
        return categories.map(category => ({
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            parentId: category.parentId,
            children: category.children,
            productCount: category.productCount,
        }));
    }

    @Get('root')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    @ApiResponse({ status: 200, description: '–ö–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–ª—É—á–µ–Ω—ã', type: [CategoryResponse] })
    async getRootCategories(): Promise<CategoryResponse[]> {
        const categories = await this.categoryService.getRootCategories();
        
        return categories.map(category => ({
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            children: category.children,
            productCount: category.productCount,
        }));
    }

    @Get(':id/children')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    @ApiResponse({ status: 200, description: '–î–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–ª—É—á–µ–Ω—ã', type: [CategoryResponse] })
    async getChildren(@Param('id') id: number): Promise<CategoryResponse[]> {
        const categories = await this.categoryService.getChildren(id);
        
        return categories.map(category => ({
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            children: category.children,
            productCount: category.productCount,
        }));
    }

    @Get('search')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π' })
    @ApiQuery({ name: 'q', required: true, description: '–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å' })
    @ApiQuery({ name: 'limit', required: false, description: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤' })
    @ApiResponse({ status: 200, description: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ–ª—É—á–µ–Ω—ã', type: [CategoryResponse] })
    async searchCategories(
        @Query('q') query: string,
        @Query('limit') limit: number = 10,
    ): Promise<CategoryResponse[]> {
        const categories = await this.categoryService.searchCategories(query, limit);
        
        return categories.map(category => ({
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
        }));
    }

    @Get(':id')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ ID' })
    @ApiResponse({ status: 200, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ–ª—É—á–µ–Ω–∞', type: CategoryResponse })
    @ApiResponse({ status: 404, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    async getCategoryById(@Param('id') id: number): Promise<CategoryResponse> {
        const category = await this.categoryService.findById(id);
        
        return {
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            parentId: category.parentId,
            parent: category.parent,
            children: category.children,
            metaTitle: category.metaTitle,
            metaDescription: category.metaDescription,
            productCount: category.productCount,
            createdAt: category.createdAt,
            updatedAt: category.updatedAt,
        };
    }

    @Get('slug/:slug')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ slug' })
    @ApiResponse({ status: 200, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ–ª—É—á–µ–Ω–∞', type: CategoryResponse })
    @ApiResponse({ status: 404, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    async getCategoryBySlug(@Param('slug') slug: string): Promise<CategoryResponse> {
        const category = await this.categoryService.findBySlug(slug);
        
        return {
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            parentId: category.parentId,
            parent: category.parent,
            children: category.children,
            metaTitle: category.metaTitle,
            metaDescription: category.metaDescription,
            productCount: category.productCount,
            createdAt: category.createdAt,
            updatedAt: category.updatedAt,
        };
    }

    @Post()
    @HttpCode(HttpStatus.CREATED)
    @ApiOperation({ summary: '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é' })
    @ApiResponse({ status: 201, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞', type: CategoryResponse })
    @ApiResponse({ status: 400, description: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏' })
    async createCategory(@Body() createCategoryDto: CreateCategoryDto): Promise<CategoryResponse> {
        const category = await this.categoryService.create(createCategoryDto);
        
        return {
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            parentId: category.parentId,
            metaTitle: category.metaTitle,
            metaDescription: category.metaDescription,
            productCount: category.productCount,
            createdAt: category.createdAt,
            updatedAt: category.updatedAt,
        };
    }

    @Put(':id')
    @HttpCode(HttpStatus.OK)
    @ApiOperation({ summary: '–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é' })
    @ApiResponse({ status: 200, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞', type: CategoryResponse })
    @ApiResponse({ status: 404, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    @ApiResponse({ status: 400, description: '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏' })
    async updateCategory(
        @Param('id') id: number,
        @Body() updateCategoryDto: UpdateCategoryDto,
    ): Promise<CategoryResponse> {
        const category = await this.categoryService.update(id, updateCategoryDto);
        
        return {
            id: category.id,
            name: category.name,
            slug: category.slug,
            description: category.description,
            image: category.image,
            parentId: category.parentId,
            metaTitle: category.metaTitle,
            metaDescription: category.metaDescription,
            productCount: category.productCount,
            createdAt: category.createdAt,
            updatedAt: category.updatedAt,
        };
    }

    @Delete(':id')
    @HttpCode(HttpStatus.NO_CONTENT)
    @ApiOperation({ summary: '–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é' })
    @ApiResponse({ status: 204, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞' })
    @ApiResponse({ status: 404, description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' })
    @ApiResponse({ status: 400, description: '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏' })
    async deleteCategory(@Param('id') id: number): Promise<void> {
        return this.categoryService.delete(id);
    }
}
```

## –ú–∏–≥—Ä–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã categories
```typescript
// db/migrations/YYYYMMDDHHMMSS-update-categories-table.ts
import { QueryInterface, DataTypes } from 'sequelize';

export async function up(queryInterface: QueryInterface): Promise<void> {
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏
    await queryInterface.addColumn('categories', 'description', {
        type: DataTypes.TEXT,
        allowNull: true,
    });

    await queryInterface.addColumn('categories', 'image', {
        type: DataTypes.STRING(500),
        allowNull: true,
    });

    await queryInterface.addColumn('categories', 'parent_id', {
        type: DataTypes.INTEGER,
        allowNull: true,
        references: { model: 'categories', key: 'id' },
        onDelete: 'SET NULL',
    });

    await queryInterface.addColumn('categories', 'meta_title', {
        type: DataTypes.STRING(255),
        allowNull: true,
    });

    await queryInterface.addColumn('categories', 'meta_description', {
        type: DataTypes.TEXT,
        allowNull: true,
    });

    await queryInterface.addColumn('categories', 'is_active', {
        type: DataTypes.BOOLEAN,
        allowNull: false,
        defaultValue: true,
    });

    await queryInterface.addColumn('categories', 'sort_order', {
        type: DataTypes.INTEGER,
        allowNull: false,
        defaultValue: 0,
    });

    await queryInterface.addColumn('categories', 'product_count', {
        type: DataTypes.INTEGER,
        allowNull: false,
        defaultValue: 0,
    });

    // –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã
    await queryInterface.addIndex('categories', ['slug'], { unique: true });
    await queryInterface.addIndex('categories', ['parent_id']);
    await queryInterface.addIndex('categories', ['is_active']);
    await queryInterface.addIndex('categories', ['sort_order']);
    await queryInterface.addIndex('categories', ['product_count']);
}

export async function down(queryInterface: QueryInterface): Promise<void> {
    // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–µ–∫—Å—ã
    await queryInterface.removeIndex('categories', ['product_count']);
    await queryInterface.removeIndex('categories', ['sort_order']);
    await queryInterface.removeIndex('categories', ['is_active']);
    await queryInterface.removeIndex('categories', ['parent_id']);
    await queryInterface.removeIndex('categories', ['slug']);

    // –£–¥–∞–ª—è–µ–º –∫–æ–ª–æ–Ω–∫–∏
    await queryInterface.removeColumn('categories', 'product_count');
    await queryInterface.removeColumn('categories', 'sort_order');
    await queryInterface.removeColumn('categories', 'is_active');
    await queryInterface.removeColumn('categories', 'meta_description');
    await queryInterface.removeColumn('categories', 'meta_title');
    await queryInterface.removeColumn('categories', 'parent_id');
    await queryInterface.removeColumn('categories', 'image');
    await queryInterface.removeColumn('categories', 'description');
}
```

## DTO –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### CreateCategoryDto
```typescript
// src/infrastructure/dto/category/create-category.dto.ts
import { IsString, IsOptional, IsBoolean, IsInt, IsUrl, Length, Min } from 'class-validator';

export class CreateCategoryDto {
    @IsString({ message: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π' })
    @Length(1, 255, { message: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 255 —Å–∏–º–≤–æ–ª–æ–≤' })
    declare readonly name: string;

    @IsString({ message: 'Slug –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π' })
    @Length(1, 255, { message: 'Slug –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 255 —Å–∏–º–≤–æ–ª–æ–≤' })
    declare readonly slug: string;

    @IsOptional()
    @IsString({ message: '–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π' })
    declare readonly description?: string;

    @IsOptional()
    @IsUrl({}, { message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º URL' })
    declare readonly image?: string;

    @IsOptional()
    @IsInt({ message: 'ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º' })
    @Min(1, { message: 'ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0' })
    declare readonly parentId?: number;

    @IsOptional()
    @IsString({ message: 'SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π' })
    @Length(1, 255, { message: 'SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 255 —Å–∏–º–≤–æ–ª–æ–≤' })
    declare readonly metaTitle?: string;

    @IsOptional()
    @IsString({ message: 'SEO –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π' })
    declare readonly metaDescription?: string;

    @IsOptional()
    @IsBoolean({ message: '–°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±—É–ª–µ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º' })
    declare readonly isActive?: boolean;

    @IsOptional()
    @IsInt({ message: '–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º' })
    @Min(0, { message: '–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' })
    declare readonly sortOrder?: number;
}
```

### UpdateCategoryDto
```typescript
// src/infrastructure/dto/category/update-category.dto.ts
import { PartialType } from '@nestjs/swagger';
import { CreateCategoryDto } from './create-category.dto';

export class UpdateCategoryDto extends PartialType(CreateCategoryDto) {}
```

## Response –∫–ª–∞—Å—Å—ã

### CategoryResponse
```typescript
// src/infrastructure/responses/category/category.response.ts
import { ApiProperty } from '@nestjs/swagger';

export class CategoryResponse {
    @ApiProperty({ description: 'ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    declare readonly id: number;

    @ApiProperty({ description: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    declare readonly name: string;

    @ApiProperty({ description: 'Slug –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' })
    declare readonly slug: string;

    @ApiProperty({ description: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', required: false })
    declare readonly description?: string;

    @ApiProperty({ description: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', required: false })
    declare readonly image?: string;

    @ApiProperty({ description: 'ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', required: false })
    declare readonly parentId?: number;

    @ApiProperty({ description: '–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è', required: false })
    declare readonly parent?: {
        id: number;
        name: string;
        slug: string;
    };

    @ApiProperty({ description: '–î–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', type: [CategoryResponse], required: false })
    declare readonly children?: CategoryResponse[];

    @ApiProperty({ description: 'SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫', required: false })
    declare readonly metaTitle?: string;

    @ApiProperty({ description: 'SEO –æ–ø–∏—Å–∞–Ω–∏–µ', required: false })
    declare readonly metaDescription?: string;

    @ApiProperty({ description: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤' })
    declare readonly productCount: number;

    @ApiProperty({ description: '–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è' })
    declare readonly createdAt: Date;

    @ApiProperty({ description: '–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è' })
    declare readonly updatedAt: Date;
}

export class CategoryListResponse {
    @ApiProperty({ description: '–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π', type: [CategoryResponse] })
    declare readonly data: CategoryResponse[];

    @ApiProperty({ description: '–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏' })
    declare readonly meta: {
        totalCount: number;
        currentPage: number;
        limit: number;
        lastPage: number;
        nextPage: number | null;
        previousPage: number | null;
    };
}
```

## –¢–µ—Å—Ç—ã

### Unit —Ç–µ—Å—Ç—ã –¥–ª—è CategoryService
```typescript
// tests/unit/services/category.service.unit.test.ts
import { Test, TestingModule } from '@nestjs/testing';
import { getModelToken } from '@nestjs/sequelize';
import { NotFoundException, BadRequestException } from '@nestjs/common';
import { CategoryService } from '@app/infrastructure/services/category.service';
import { CategoryModel } from '@app/domain/models/category.model';
import { ProductModel } from '@app/domain/models/product.model';

describe('CategoryService', () => {
    let service: CategoryService;
    let categoryModel: typeof CategoryModel;
    let productModel: typeof ProductModel;

    const mockCategory = {
        id: 1,
        name: 'Test Category',
        slug: 'test-category',
        description: 'Test description',
        image: 'https://example.com/image.png',
        parentId: null,
        isActive: true,
        productCount: 5,
        update: jest.fn(),
        destroy: jest.fn(),
    };

    beforeEach(async () => {
        const module: TestingModule = await Test.createTestingModule({
            providers: [
                CategoryService,
                {
                    provide: getModelToken(CategoryModel),
                    useValue: {
                        findByPk: jest.fn(),
                        findOne: jest.fn(),
                        findAll: jest.fn(),
                        findAndCountAll: jest.fn(),
                        create: jest.fn(),
                        update: jest.fn(),
                        count: jest.fn(),
                    },
                },
                {
                    provide: getModelToken(ProductModel),
                    useValue: {
                        count: jest.fn(),
                    },
                },
            ],
        }).compile();

        service = module.get<CategoryService>(CategoryService);
        categoryModel = module.get<typeof CategoryModel>(getModelToken(CategoryModel));
        productModel = module.get<typeof ProductModel>(getModelToken(ProductModel));
    });

    it('should be defined', () => {
        expect(service).toBeDefined();
    });

    describe('findById', () => {
        it('–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ ID', async () => {
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(mockCategory as any);
            const result = await service.findById(1);
            expect(result).toEqual(mockCategory);
        });

        it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', async () => {
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(null);
            await expect(service.findById(1)).rejects.toThrow(NotFoundException);
        });
    });

    describe('create', () => {
        it('–¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é', async () => {
            jest.spyOn(categoryModel, 'findOne').mockResolvedValue(null);
            jest.spyOn(categoryModel, 'create').mockResolvedValue(mockCategory as any);

            const result = await service.create({
                name: 'Test Category',
                slug: 'test-category',
            });

            expect(result).toEqual(mockCategory);
            expect(categoryModel.create).toHaveBeenCalledWith({
                name: 'Test Category',
                slug: 'test-category',
            });
        });

        it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ slug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', async () => {
            jest.spyOn(categoryModel, 'findOne').mockResolvedValue(mockCategory as any);
            await expect(service.create({
                name: 'Test Category',
                slug: 'test-category',
            })).rejects.toThrow(BadRequestException);
        });

        it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', async () => {
            jest.spyOn(categoryModel, 'findOne').mockResolvedValue(null);
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(null);

            await expect(service.create({
                name: 'Test Category',
                slug: 'test-category',
                parentId: 999,
            })).rejects.toThrow(BadRequestException);
        });
    });

    describe('delete', () => {
        it('–¥–æ–ª–∂–µ–Ω —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –±–µ–∑ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π', async () => {
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(mockCategory as any);
            jest.spyOn(productModel, 'count').mockResolvedValue(0);
            jest.spyOn(categoryModel, 'count').mockResolvedValue(0);
            jest.spyOn(mockCategory, 'destroy').mockResolvedValue(undefined);

            await service.delete(1);
            expect(mockCategory.destroy).toHaveBeenCalled();
        });

        it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã', async () => {
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(mockCategory as any);
            jest.spyOn(productModel, 'count').mockResolvedValue(5);

            await expect(service.delete(1)).rejects.toThrow(BadRequestException);
        });

        it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ —É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', async () => {
            jest.spyOn(categoryModel, 'findByPk').mockResolvedValue(mockCategory as any);
            jest.spyOn(productModel, 'count').mockResolvedValue(0);
            jest.spyOn(categoryModel, 'count').mockResolvedValue(3);

            await expect(service.delete(1)).rejects.toThrow(BadRequestException);
        });
    });
});
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã categories
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å CategoryModel —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω CategoryService —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- [ ] –°–æ–∑–¥–∞–Ω CategoryController —Å API endpoints
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã DTO –∫–ª–∞—Å—Å—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (CreateCategoryDto, UpdateCategoryDto)
- [ ] –°–æ–∑–¥–∞–Ω—ã Response –∫–ª–∞—Å—Å—ã —Å Swagger (CategoryResponse, CategoryListResponse)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (parent_id)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã unit —Ç–µ—Å—Ç—ã –¥–ª—è CategoryService
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã integration —Ç–µ—Å—Ç—ã –¥–ª—è API
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å —Å ProductModel

### üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ product_count
- [ ] SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (1 –Ω–µ–¥–µ–ª—è)
1. **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã categories
2. **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å** CategoryModel —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
3. **–°–æ–∑–¥–∞—Ç—å DTO –∫–ª–∞—Å—Å—ã** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–°–æ–∑–¥–∞—Ç—å Response –∫–ª–∞—Å—Å—ã** —Å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CategoryService** —Å –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π

### –§–∞–∑–∞ 2: API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (3-4 –¥–Ω—è)
6. **–°–æ–∑–¥–∞—Ç—å CategoryController** —Å API endpoints
7. **–î–æ–±–∞–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** (parent_id)
8. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –∏ –ø–æ–∏—Å–∫
9. **–î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å —Å —Ç–æ–≤–∞—Ä–∞–º–∏** (product_count)

### –§–∞–∑–∞ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ (2-3 –¥–Ω—è)
10. **–ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã** –¥–ª—è CategoryService
11. **–ù–∞–ø–∏—Å–∞—Ç—å integration —Ç–µ—Å—Ç—ã** –¥–ª—è API
12. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
13. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é

## –†–∏—Å–∫–∏ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### ‚ö†Ô∏è –†–∏—Å–∫–∏:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ø—Ä–∏ –≥–ª—É–±–æ–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **SEO**: –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–∞-–ø–æ–ª—è –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π SEO —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ URL –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω—ã–º

### üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis –¥–ª—è –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø–æ–∏—Å–∫–∞
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CDN –∏–ª–∏ —Ñ–∞–π–ª–æ–≤—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
- **SEO**: –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–∞-–ø–æ–ª—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:
- **ProductService** - —Å–≤—è–∑—å —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- **BrandService** - —Å–≤—è–∑—å —Å –±—Ä–µ–Ω–¥–∞–º–∏
- **ImageService** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **SearchService** - –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º –∏–µ—Ä–∞—Ä—Ö–∏–∏
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

## TL;DR

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤–∫–ª—é—á–∞–µ—Ç:
- **1 —Ç–∞–±–ª–∏—Ü–∞**: categories (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è)
- **1 –º–æ–¥–µ–ª—å**: CategoryModel —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **1 —Å–µ—Ä–≤–∏—Å**: CategoryService —Å CRUD –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **1 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: API –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–§—É–Ω–∫—Ü–∏–∏**: –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, SEO –ø–æ–ª—è
- **–°–≤—è–∑–∏**: —Å —Ç–æ–≤–∞—Ä–∞–º–∏ (product_count) –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º