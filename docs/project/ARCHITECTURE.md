# üèóÔ∏è Architecture Documentation

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏

### Domain Layer (–î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –º–æ–¥–µ–ª–∏, DTO –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —Ç–∏–ø—ã
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –Ω–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç NestJS/Sequelize
**–°–æ–¥–µ—Ä–∂–∏—Ç**:

- `interfaces/` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- `models/` - –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (User, Product, Order, etc.)
- `dto/` - Data Transfer Objects –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `types/` - TypeScript —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã

### Infrastructure Layer (–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–°–æ–¥–µ—Ä–∂–∏—Ç**:

- `controllers/` - HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- `services/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `repositories/` - –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ Sequelize
- `config/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `guards/` - –∑–∞—â–∏—Ç–Ω–∏–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `pipes/` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
- `filters/` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ

- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** ‚Üí –°–µ—Ä–≤–∏—Å—ã ‚Üí –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚Üí –ë–î
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** ‚Üí DTO/Responses
- **–°–µ—Ä–≤–∏—Å—ã** ‚Üí DTO/Models/Responses
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** ‚Üí Sequelize Models
- **Domain** ‚Üí Infrastructure (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ

- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Infrastructure –≤ Domain
- –ü—Ä—è–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- –î–æ—Å—Ç—É–ø –∫ –ë–î –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö

## Multi-tenancy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### TenantContext

```typescript
@Injectable({ scope: Scope.REQUEST })
export class TenantContext {
    setTenantId(tenantId: number): void;
    getTenantId(): number;
    getTenantIdOrNull(): number | null;
    hasTenantId(): boolean;
    clear(): void;
}
```

### TenantMiddleware

- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ**: tenant ID –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `x-tenant-id`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ–Ω–∞–Ω—Ç–∞
- **Fallback**: tenant_id=1 –≤ development —Ä–µ–∂–∏–º–µ
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**: tenant ID –≤ TenantContext –∏ request

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –ø–æ `tenant_id`
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è: health checks, API docs, static assets
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ subdomain (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã (11 —Ç–∏–ø–æ–≤)

- **OrderCreatedEvent** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- **OrderStatusChangedEvent** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- **UserRegisteredEvent** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **PaymentCompletedEvent** - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- **OrderShippedEvent** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
- **OrderDeliveredEvent** - –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
- **OrderCancelledEvent** - –æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞
- **PasswordChangedEvent** - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- **PasswordResetRequestedEvent** - –∑–∞–ø—Ä–æ—Å —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
- **EmailVerificationEvent** - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
- **MarketingCampaignEvent** - –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏

### NotificationEventHandler

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤**: Map –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –æ—á–µ—Ä–µ–¥—å –Ω–∞ 50 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Ç–∞–π–º–∞—É—Ç–æ–º 1—Å
- **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**: –æ—Ç 1 (–º–∞—Ä–∫–µ—Ç–∏–Ω–≥) –¥–æ 10 (–∑–∞–∫–∞–∑—ã)
- **–†–µ—Ç—Ä–∞–∏**: –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–ú–µ—Ç—Ä–∏–∫–∏**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Promise.allSettled –¥–ª—è –±–∞—Ç—á–µ–π

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Repository Pattern

- –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
- –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –º–æ–∫–∏

### Service Layer Pattern

- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Guard Pattern

- –ó–∞—â–∏—Ç–∞ endpoints
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Rate limiting

### Decorator Pattern

- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Controllers Module

```typescript
@Module({
    imports: [ServicesModule],
    controllers: [UserController, ProductController, ...],
})
export class ControllersModule {}
```

### Services Module

```typescript
@Module({
    imports: [RepositoriesModule],
    providers: [UserService, ProductService, ...],
    exports: [UserService, ProductService, ...],
})
export class ServicesModule {}
```

### Repositories Module

```typescript
@Module({
    imports: [SequelizeModule.forFeature([UserModel, ProductModel, ...])],
    providers: [UserRepository, ProductRepository, ...],
    exports: [UserRepository, ProductRepository, ...],
})
export class RepositoriesModule {}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Validation

- **–ë–µ–∑ Joi**: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: —Å—Ç—Ä–æ–≥–∏–µ TypeScript —Ç–∏–ø—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–ª—ã —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ production
- **–†–æ—Ç–∞—Ü–∏—è**: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–º–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç–æ–≤

### Sequelize Configuration

- **–ú–æ–¥–µ–ª–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –æ—Ç–∫–ª—é—á–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –º–∏–≥—Ä–∞—Ü–∏–∏)
- **Charset**: utf8mb4 –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ emoji
- **Collation**: utf8mb4_0900_ai_ci

### Connection Pool

- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- **Graceful shutdown**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- **In-memory cache**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–æ–ª–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **Swagger –º–µ–º–æ–∏–∑–∞—Ü–∏—è**: 82% —ç–∫–æ–Ω–æ–º–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- **Connection pool**: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **RoleGuard –∫—ç—à**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–±–æ—Ä–æ–≤ —Ä–æ–ª–µ–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Template –∫—ç—à**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **Lazy loading**: –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Batch processing**: –±–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Parallel execution**: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- **Memory management**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Precompiled regex**: –ø—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- **Connection pooling**: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### HTTP Security

- **Helmet**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **CORS**: —Å—Ç—Ä–æ–≥–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins
- **CSP**: Content Security Policy –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
- **Trust Proxy**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∫—Å–∏ –≤ production

### Rate Limiting

- **BruteforceGuard**: –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫
- **ThrottlerModule**: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
- **Endpoint-specific limits**: —Ä–∞–∑–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è

- **CustomValidationPipe**: –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å —Ä—É—Å—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **Sanitization validators**: –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
- **Password strength**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª–µ–π
- **Phone validation**: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Pino**: –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π JSON –ª–æ–≥–≥–µ—Ä
- **Correlation ID**: —Ç—Ä–µ–∫–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –≤–µ—Å—å —Å—Ç–µ–∫
- **PII masking**: –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Performance metrics**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Health Checks

- **HealthController**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- **Database health**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
- **Graceful shutdown**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Guards (–ó–∞—â–∏—Ç–Ω–∏–∫–∏)

- **AuthGuard**: –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **RoleGuard**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **BruteforceGuard**: –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫ —Å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏

### Middleware (–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û)

- **CorrelationIdMiddleware**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ correlation ID
- **TenantMiddleware**: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è tenant ID

### Pipes (–¢—Ä—É–±—ã)

- **CustomValidationPipe**: –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å —Ä—É—Å—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **PaginationValidator**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

### Filters (–§–∏–ª—å—Ç—Ä—ã)

- **CustomNotFoundExceptionFilter**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ 404 –æ—à–∏–±–æ–∫
- **SequelizeDatabaseErrorExceptionFilter**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ë–î
- **SequelizeUniqueConstraintExceptionFilter**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

### Strategies (–°—Ç—Ä–∞—Ç–µ–≥–∏–∏)

- **JwtStrategy**: Passport —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### Validators (–í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã)

- **SanitizeStringValidator**: –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
- **PasswordStrengthValidator**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª–µ–π
- **PhoneValidator**: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- **NameValidator**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### Decorators (–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã)

- **@Roles**: –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ–º—ã—Ö —Ä–æ–ª–µ–π
- **Swagger –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã**: 80+ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

### Context (–ö–æ–Ω—Ç–µ–∫—Å—Ç)

- **TenantContext**: Request-scoped –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **CorrelationId**: —Ç—Ä–µ–∫–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –≤–µ—Å—å —Å—Ç–µ–∫

## –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Bootstrap –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Global Prefix**: `/online-store` –¥–ª—è –≤—Å–µ—Ö endpoints
- **Static Assets**: –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `/online-store/static/`
- **Trust Proxy**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∫—Å–∏ –≤ production
- **X-Powered-By**: —Å–∫—Ä—ã—Ç–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Express

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Global Pipes**: `CustomValidationPipe` –¥–ª—è –≤—Å–µ—Ö endpoints
- **Global Filters**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Sequelize –∏ NotFound
- **APP_GUARD**: `BruteforceGuard` –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∑–∞—â–∏—Ç–Ω–∏–∫
- **Cookie Parser**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ cookies —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º

### Interceptors (–ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∏)

- **FileInterceptor**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Å Multer
- **Multer Config**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### –ú–æ–¥—É–ª–∏ –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **ThrottlerModule**: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ (short, medium, long, login, refresh, registration)
- **EventEmitterModule**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **JwtModule**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è JWT
- **SequelizeModule**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- **ConfigModule**: –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---
