# üöÄ Deployment Documentation

## CI/CD Pipeline

### GitHub Actions

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –¥–∂–æ–±—ã**: lint, test:unit, test:integration, build
- **MySQL —Å–µ—Ä–≤–∏—Å**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: TypeScript, Jest, npm dependencies
- **–ê–≤—Ç–æ–æ—Ç–º–µ–Ω–∞**: –æ—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–º–∏—Ç–∞—Ö

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CI

```yaml
strategy:
    matrix:
        include:
            - name: 'Lint & Format'
              command: 'npm run lint:ts'
            - name: 'Unit Tests'
              command: 'npm run test:unit'
            - name: 'Integration Tests'
              command: 'npm run test:integration:ci'
            - name: 'Build'
              command: 'npm run build'
```

### CI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **Shallow clone**: `fetch-depth: 1` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **Build artifacts**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–±–æ—Ä–∫–∏
- **MySQL –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è**: –¥–æ 4 –≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è integration —Ç–µ—Å—Ç–æ–≤

## Deployment –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### Railway

- **–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π**: –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: —á–µ—Ä–µ–∑ Railway dashboard
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ MySQL
- **–î–æ–º–µ–Ω**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏

### Render

- **–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π**: –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: —á–µ—Ä–µ–∑ Render dashboard
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –æ—Ç–¥–µ–ª—å–Ω—ã–π MySQL —Å–µ—Ä–≤–∏—Å
- **–î–æ–º–µ–Ω**: –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω —Å SSL
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏ —Ä—É—á–Ω–æ–µ

## Docker

### Dockerfile

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY dist ./dist
EXPOSE 5000
CMD ["node", "dist/main.js"]
```

### Docker Compose

```yaml
version: '3.8'
services:
    app:
        build: .
        ports:
            - '5000:5000'
        environment:
            - NODE_ENV=production
        depends_on:
            - mysql

    mysql:
        image: mysql:8.0
        environment:
            MYSQL_ROOT_PASSWORD: password
            MYSQL_DATABASE: online_store
        volumes:
            - mysql_data:/var/lib/mysql

volumes:
    mysql_data:
```

## Health Checks

### Terminus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- **`/health`** - –æ–±—â–∏–π health check
- **`/health/database`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- **`/health/memory`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- **`/health/disk`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Uptime**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
- **Response time**: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ endpoints
- **Error rate**: –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- **Database connections**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤ production

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

- **–ü—Ä–∏ –¥–µ–ø–ª–æ–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- **Rollback**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π

- **Backup**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ staging
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Production

```bash
NODE_ENV=production
PORT=5000
ALLOWED_ORIGINS=https://your-domain.com
COOKIE_PARSER_SECRET_KEY=your_secure_secret
JWT_ACCESS_SECRET=your_jwt_secret
JWT_REFRESH_SECRET=your_refresh_secret
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=30d
SQL_LOGGING=false
SECURITY_HELMET_ENABLED=true
SECURITY_CORS_ENABLED=true
SECURITY_CSP_ENABLED=true
RATE_LIMIT_ENABLED=true
```

### Staging

```bash
NODE_ENV=staging
PORT=5000
ALLOWED_ORIGINS=https://staging.your-domain.com
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–∫ –≤ production
```

### Development

```bash
NODE_ENV=development
PORT=5000
ALLOWED_ORIGINS=http://localhost:3000
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

- **JSON —Ñ–æ—Ä–º–∞—Ç**: –¥–ª—è production
- **Pretty printing**: –¥–ª—è development
- **–£—Ä–æ–≤–Ω–∏**: info, warn, error
- **Correlation ID**: –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏

- **Response time**: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ endpoints
- **Throughput**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **Error rate**: –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- **Memory usage**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **Database connections**: –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ê–ª–µ—Ä—Ç—ã

- **High error rate**: –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –æ—à–∏–±–æ–∫
- **Slow response**: –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- **Memory leak**: —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- **Database issues**: –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ production

### HTTPS

- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **HSTS**: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTPS
- **Secure cookies**: —Ç–æ–ª—å–∫–æ HTTPS –≤ production

### Headers –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **Helmet**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **CORS**: —Å—Ç—Ä–æ–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production
- **CSP**: Content Security Policy

### Rate Limiting

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã**: –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- **Auth –ª–∏–º–∏—Ç—ã**: –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- **IP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö IP

## Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î
- **Point-in-time recovery**: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### –ö–æ–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Git**: –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **Environment variables**: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **Secrets management**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Load balancer**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- **Stateless**: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Database**: –æ—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Memory**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ RAM
- **CPU**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏
- **Storage**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **Database connection**: –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î
- **Memory leak**: —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- **Slow queries**: –º–µ–¥–ª–µ–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- **Rate limiting**: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- **Logs**: –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
- **Metrics**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
- **Health checks**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- **Database**: –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

- **Rollback**: –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
- **Restart**: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
- **Database restore**: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
- **Scaling**: –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
